# 多周期ROE快速指南

## 🎯 什么是多周期ROE？

多周期ROE提供**4个不同时间范围**的资金使用效率分析：

| 周期 | 时间范围 | 用途 |
|------|---------|------|
| **24小时** | 最近1天 | 短期交易效率 |
| **7天** | 最近1周 | 中期表现趋势 |
| **30天** | 最近1月 | 月度整体表现 |
| **历史总计** | 开户至今 | 长期累计收益 |

---

## 📊 核心公式

```
ROE (%) = (周期累计PNL / 起始权益) × 100
```

**示例**:
- 7天前权益: $10,000
- 7天累计PNL: +$500
- 7天ROE = (500 / 10000) × 100 = **+5%**

---

## 💻 使用方法

### 命令行

```bash
# 查看多周期ROE
python main.py 0x你的地址

# 生成报告
python main.py 0x你的地址 -r
```

### Python API

```python
from apex_fork import ApexCalculator

calc = ApexCalculator()
multi_roe = calc.calculate_multi_period_roe("0x地址")

print(f"24h: {multi_roe.roe_24h.roe_percent:.2f}%")
print(f"7d: {multi_roe.roe_7d.roe_percent:.2f}%")
print(f"30d: {multi_roe.roe_30d.roe_percent:.2f}%")
print(f"全部: {multi_roe.roe_all.roe_percent:.2f}%")
```

---

## 📈 输出示例

### CLI显示

```
  ┌─ 多周期ROE 📈
  │
  ┌────────────────────┬──────────────┬──────────────┬──────────────────┬──────────────────┐
  时间周期                 │ ROE            │ 起始权益           │ 当前权益               │ 评级
  ├────────────────────┼──────────────┼──────────────┼──────────────────┼──────────────────┤
  24小时                 │         +2.50% │        $10,000 │            $10,250 │ 📈 盈利
  7天                   │         +5.00% │        $10,000 │            $10,500 │ ✅ 优秀
  30天                  │         +8.00% │         $9,500 │            $10,260 │ ✅ 优秀
  历史总计                 │        +50.00% │         $7,000 │            $10,500 │ 🔥 极佳
  └────────────────────┴──────────────┴──────────────┴──────────────────┴──────────────────┘
```

---

## 🎯 评级系统

| ROE范围 | 评级 | 图标 | 说明 |
|---------|------|------|------|
| ≥10% | 极佳 | 🔥 | 超高收益 |
| ≥5% | 优秀 | ✅ | 高收益 |
| ≥0% | 盈利 | 📈 | 正收益 |
| ≥-5% | 小幅亏损 | ⚠️ | 轻度负收益 |
| <-5% | 较大亏损 | 📉 | 显著负收益 |

---

## 🔍 如何解读？

### 1. 趋势分析

**表现改善** (短期 > 长期):
```
24h: +10%  >  7d: +5%  >  30d: +2%
→ 最近表现越来越好！
```

**表现恶化** (短期 < 长期):
```
24h: -5%  <  7d: +2%  <  30d: +8%
→ 需要检查最近的交易策略
```

**稳定表现** (各周期接近):
```
24h: +5%  ≈  7d: +5.5%  ≈  30d: +4.8%
→ 策略稳定，表现一致
```

### 2. 风险评估

**高波动** (周期差异大):
```
24h: +20%, 7d: -10%, 30d: +5%
→ 高风险策略，收益不稳定
```

**低波动** (周期接近):
```
24h: +3%, 7d: +3.5%, 30d: +3.2%
→ 低风险策略，稳健增长
```

### 3. 特殊情况

**历史总ROE异常高**:
```
历史总计: +5000%
```
- **原因**: 初始资金很小（如$100），现在账户较大（如$5100）
- **理解**: 这是总增长倍数，不代表交易策略ROE
- **建议**: 重点关注24h/7d/30d的ROE

---

## ❓ 常见问题

### Q1: 为什么历史总ROE这么高？

**A**: 如果最初入金很少（如$100），现在账户价值较大（如$10,000），ROE会非常高：
```
ROE = (10000 - 100) / 100 × 100 = 9900%
```
这反映了总增长倍数，而非交易效率。

### Q2: 多周期ROE和累计PNL有什么区别？

**A**:
- **累计PNL**: 绝对金额，不考虑账户规模
- **多周期ROE**: 百分比，考虑账户规模和时间

例如：
- 账户A: $1000 → $1100 (PNL: $100, ROE: 10%)
- 账户B: $10000 → $10100 (PNL: $100, ROE: 1%)

账户A的资金使用效率更高。

### Q3: ROE包含入金出金吗？

**A**: 是的。ROE基于账户权益变化，包括：
- ✅ 交易盈亏
- ✅ 入金出金
- ✅ 未实现盈亏

建议结合Profit Factor和Sharpe Ratio综合评估交易策略。

### Q4: 如何使用多周期ROE优化策略？

**A**: 三步法：

1. **识别趋势**: 对比各周期ROE，看短期表现vs长期表现
2. **定位问题**: 如果短期ROE下降，检查最近的交易
3. **调整策略**: 根据ROE反馈优化仓位管理和风险控制

---

## 💡 最佳实践

### 1. 定期监控

```bash
# 每天查看多周期ROE
python main.py 0x你的地址
```

### 2. 结合其他指标

- **Profit Factor**: 盈亏比率
- **Sharpe Ratio**: 风险调整收益
- **Win Rate**: 胜率

### 3. 关注趋势

不要过度关注单日ROE，重点看：
- 7天和30天的趋势
- 各周期的稳定性
- 短期vs长期的对比

### 4. 记录分析

```bash
# 每周生成报告
python main.py 0x你的地址 -r

# 保存历史记录，对比变化
mv trading_report_*.md reports/week_$(date +%Y%m%d).md
```

---

## 📚 更多资源

- **完整实施总结**: `MULTI_PERIOD_ROE_SUMMARY.md`
- **原始ROE文档**: `ROE_USER_GUIDE.md`
- **快速参考**: `ROE_QUICK_REFERENCE.md`

---

**版本**: 2.0.0 | **更新**: 2026-02-04
