<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hyperliquid äº¤æ˜“åœ°å€åˆ†ææŠ¥å‘Š</title>
    <style>
        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #21262d;
            --border-color: #30363d;
            --text-primary: #e6edf3;
            --text-secondary: #8b949e;
            --text-muted: #6e7681;
            --accent-cyan: #58a6ff;
            --accent-green: #3fb950;
            --accent-red: #f85149;
            --accent-yellow: #d29922;
            --accent-purple: #a371f7;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.5;
            padding: 20px;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            padding: 30px 0;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2rem;
            color: var(--accent-cyan);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .header .subtitle {
            color: var(--text-secondary);
            margin-top: 8px;
            font-size: 0.9rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 16px;
            text-align: center;
        }

        .stat-card .label {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 4px;
        }

        .stat-card .value {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .stat-card .value.positive {
            color: var(--accent-green);
        }

        .stat-card .value.negative {
            color: var(--accent-red);
        }

        .table-container {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .table-header h2 {
            font-size: 1.1rem;
            color: var(--text-primary);
        }

        .table-controls {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .search-input {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 8px 12px;
            color: var(--text-primary);
            font-size: 0.9rem;
            width: 250px;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent-cyan);
        }

        .table-wrapper {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        th {
            background: var(--bg-tertiary);
            color: var(--accent-cyan);
            font-weight: 600;
            text-align: left;
            padding: 12px 16px;
            border-bottom: 1px solid var(--border-color);
            white-space: nowrap;
            cursor: pointer;
            user-select: none;
            position: relative;
        }

        th:hover {
            background: var(--bg-primary);
        }

        th .sort-icon {
            margin-left: 4px;
            opacity: 0.3;
        }

        th.sort-asc .sort-icon,
        th.sort-desc .sort-icon {
            opacity: 1;
        }

        th.sort-asc .sort-icon::after {
            content: 'â–²';
        }

        th.sort-desc .sort-icon::after {
            content: 'â–¼';
        }

        th:not(.sort-asc):not(.sort-desc) .sort-icon::after {
            content: 'â‡…';
        }

        td {
            padding: 12px 16px;
            border-bottom: 1px solid var(--border-color);
            white-space: nowrap;
        }

        tr:hover {
            background: var(--bg-tertiary);
        }

        .rank {
            color: var(--text-muted);
            font-weight: 500;
        }

        .address {
            font-family: 'SF Mono', Monaco, 'Andale Mono', monospace;
            color: var(--accent-purple);
            font-size: 0.85rem;
        }

        .positive {
            color: var(--accent-green);
        }

        .negative {
            color: var(--accent-red);
        }

        .neutral {
            color: var(--text-secondary);
        }

        .highlight {
            font-weight: 600;
        }

        .footer {
            text-align: center;
            padding: 20px;
            color: var(--text-muted);
            font-size: 0.85rem;
            margin-top: 30px;
            border-top: 1px solid var(--border-color);
        }

        .column-toggle {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 8px 16px;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 0.85rem;
        }

        .column-toggle:hover {
            background: var(--bg-primary);
        }

        .column-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
            z-index: 100;
            display: none;
            min-width: 200px;
            max-height: 400px;
            overflow-y: auto;
        }

        .column-menu.show {
            display: block;
        }

        .column-menu label {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 0;
            cursor: pointer;
            font-size: 0.85rem;
        }

        .column-menu label:hover {
            color: var(--accent-cyan);
        }

        .column-menu-buttons {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        .column-menu-btn {
            flex: 1;
            padding: 6px 12px;
            font-size: 0.8rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .column-menu-btn:hover {
            background: var(--accent-cyan);
            color: var(--bg-primary);
            border-color: var(--accent-cyan);
        }

        /* ç­›é€‰å™¨æ ·å¼ */
        .filter-container {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .filter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .filter-header h3 {
            font-size: 1rem;
            color: var(--text-primary);
            margin: 0;
        }

        .filter-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .filter-row {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-select, .filter-input {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 8px 12px;
            color: var(--text-primary);
            font-size: 0.85rem;
        }

        .filter-select {
            min-width: 140px;
        }

        .filter-input {
            width: 100px;
        }

        .filter-select:focus, .filter-input:focus {
            outline: none;
            border-color: var(--accent-cyan);
        }

        .filter-btn {
            padding: 8px 16px;
            font-size: 0.85rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .filter-btn-add {
            background: var(--accent-cyan);
            color: var(--bg-primary);
            border-color: var(--accent-cyan);
        }

        .filter-btn-add:hover {
            background: #4090e0;
        }

        .filter-btn-remove {
            background: var(--bg-tertiary);
            color: var(--accent-red);
            border-color: var(--accent-red);
            padding: 8px 12px;
        }

        .filter-btn-remove:hover {
            background: var(--accent-red);
            color: white;
        }

        .filter-btn-clear {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
        }

        .filter-btn-clear:hover {
            background: var(--bg-primary);
            color: var(--text-primary);
        }

        .filter-actions {
            display: flex;
            gap: 10px;
            margin-top: 12px;
        }

        .filter-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: var(--bg-tertiary);
            border: 1px solid var(--accent-cyan);
            border-radius: 20px;
            padding: 4px 12px;
            font-size: 0.8rem;
            color: var(--accent-cyan);
        }

        .filter-badge-remove {
            cursor: pointer;
            color: var(--accent-red);
            font-weight: bold;
        }

        .active-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }

        .filter-result-count {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-left: auto;
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .table-controls {
                flex-direction: column;
                align-items: stretch;
            }

            .search-input {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ” Hyperliquid äº¤æ˜“åœ°å€åˆ†ææŠ¥å‘Š</h1>
            <p class="subtitle">ç”Ÿæˆæ—¶é—´: 2026-02-04 22:52:01 | æ•°æ®æ¥æº: Hyperliquid API</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="label">åˆ†æåœ°å€æ•°</div>
                <div class="value">20 / 20</div>
            </div>
            <div class="stat-card">
                <div class="label">å¹³å‡å¤æ™®æ¯”ç‡</div>
                <div class="value positive">735.91</div>
            </div>
            <div class="stat-card">
                <div class="label">å¹³å‡èƒœç‡</div>
                <div class="value">94.2%</div>
            </div>
            <div class="stat-card">
                <div class="label">æ€»ç´¯è®¡ç›ˆäº</div>
                <div class="value positive">$194,815</div>
            </div>
            <div class="stat-card">
                <div class="label">ç›ˆåˆ©åœ°å€æ•°</div>
                <div class="value positive">17 / 20</div>
            </div>
        </div>

        <div class="filter-container">
            <div class="filter-header">
                <h3>ğŸ”§ æŒ‡æ ‡ç­›é€‰</h3>
                <span class="filter-result-count" id="filterResultCount"></span>
            </div>
            <div class="filter-list" id="filterList">
                <!-- ç­›é€‰æ¡ä»¶å°†ç”± JS ç”Ÿæˆ -->
            </div>
            <div class="filter-actions">
                <button class="filter-btn filter-btn-add" id="addFilterBtn">+ æ·»åŠ ç­›é€‰æ¡ä»¶</button>
                <button class="filter-btn filter-btn-clear" id="clearFiltersBtn">æ¸…é™¤å…¨éƒ¨</button>
            </div>
            <div class="active-filters" id="activeFilters">
                <!-- æ´»åŠ¨ç­›é€‰æ ‡ç­¾å°†ç”± JS ç”Ÿæˆ -->
            </div>
        </div>

        <div class="table-container">
            <div class="table-header">
                <h2>ğŸ“Š è¯¦ç»†æ•°æ®è¡¨æ ¼</h2>
                <div class="table-controls">
                    <input type="text" class="search-input" id="searchInput" placeholder="æœç´¢åœ°å€...">
                    <div style="position: relative;">
                        <button class="column-toggle" id="columnToggle">æ˜¾ç¤ºåˆ— â–¼</button>
                        <div class="column-menu" id="columnMenu">
                            <!-- åˆ—é€‰æ‹©å™¨å°†ç”± JS ç”Ÿæˆ -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="table-wrapper">
                <table id="dataTable">
                    <thead>
                        <tr id="tableHeader">
                            <!-- è¡¨å¤´å°†ç”± JS ç”Ÿæˆ -->
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- æ•°æ®å°†ç”± JS ç”Ÿæˆ -->
                    </tbody>
                </table>
            </div>
        </div>

        <div class="footer">
            <p>ğŸ“ˆ Apex Fork - äº¤æ˜“åˆ†æç³»ç»Ÿ | åŸºäº Hyperliquid å®˜æ–¹ API</p>
            <p>æ‰€æœ‰æŒ‡æ ‡åŸºäºå•ç¬”äº¤æ˜“æ”¶ç›Šç‡è®¡ç®—ï¼Œä¸ä¾èµ–æœ¬é‡‘æ•°æ®</p>
        </div>
    </div>

    <script>
        // è¡¨æ ¼æ•°æ®
        const tableData = [{"rank": 1, "address": "0xdd0e7f3a80d5a9c2c299fafc5f5939ca58e2c116", "total_trades": 34, "win_rate": 100.0, "sharpe_ratio": 7446.633654932194, "profit_factor": 1000.0, "total_pnl": 1515.7791, "total_realized_pnl": 1515.7791, "total_unrealized_pnl": 0, "account_value": 0.004224, "perp_account_value": 0.004224, "spot_account_value": 0.0, "total_margin_used": 0.0, "mean_return": 18.896894338132743, "std_return": 7.045497994463338, "trades_per_year": 7727247.26967236, "trading_days": 0.00033064814814814816, "bias": 100.0, "long_positions": 0, "short_positions": 0, "total_positions": 0, "position_bias": "ä¸­æ€§", "total_position_value": 0, "avg_hold_time": 2.8517922999855325, "hold_time_today": 0, "hold_time_7d": 2.8517922999855325, "hold_time_30d": 2.8517922999855325, "roe_24h": 0.0, "roe_7d": 87.76318964705882, "roe_30d": 87.76318964705882, "roe_all": 87.76318964705882}, {"rank": 2, "address": "0x67e4d5c95fdd024d136d520b3432ad0f94ed5081", "total_trades": 35, "win_rate": 100.0, "sharpe_ratio": 5545.998807639951, "profit_factor": 1000.0, "total_pnl": 1523.506861, "total_realized_pnl": 1523.506861, "total_unrealized_pnl": 0, "account_value": 0.003587, "perp_account_value": 0.003587, "spot_account_value": 0.0, "total_margin_used": 0.0, "mean_return": 15.81525724269128, "std_return": 8.894774164142113, "trades_per_year": 9756218.289815618, "trading_days": 0.00037412037037037036, "bias": 100.0, "long_positions": 0, "short_positions": 0, "total_positions": 0, "position_bias": "ä¸­æ€§", "total_position_value": 0, "avg_hold_time": 2.7062899919332213, "hold_time_today": 0, "hold_time_7d": 2.7062899919332213, "hold_time_30d": 2.7062899919332213, "roe_24h": 0.0, "roe_7d": 85.61471085094232, "roe_30d": 85.61471085094232, "roe_all": 85.61471085094232}, {"rank": 3, "address": "0x9945eb53d066031cb91a5862db7a0ed2d9a8f812", "total_trades": 32, "win_rate": 100.0, "sharpe_ratio": 986.2665388787276, "profit_factor": 1000.0, "total_pnl": 1386.413267, "total_realized_pnl": 1386.413267, "total_unrealized_pnl": 0, "account_value": 0.001684, "perp_account_value": 0.001684, "spot_account_value": 0.0, "total_margin_used": 0.0, "mean_return": 4.945276245921922, "std_return": 8.504713038704706, "trades_per_year": 2901559.951486763, "trading_days": 0.001383738425925926, "bias": 78.125, "long_positions": 0, "short_positions": 0, "total_positions": 0, "position_bias": "ä¸­æ€§", "total_position_value": 0, "avg_hold_time": 2.598769740841385, "hold_time_today": 0, "hold_time_7d": 2.598769740841385, "hold_time_30d": 2.598769740841385, "roe_24h": 0.0, "roe_7d": 87.99041886304909, "roe_30d": 87.99041886304909, "roe_all": 87.99041886304909}, {"rank": 4, "address": "0x4f6345e02187f1fbefefa14d84938477347f3953", "total_trades": 10889, "win_rate": 98.88196480938416, "sharpe_ratio": 258.972215817565, "profit_factor": 0.6998280956989908, "total_pnl": -130840.12639140003, "total_realized_pnl": 233920.5833036, "total_unrealized_pnl": -364760.709695, "account_value": 888187.2721606899, "perp_account_value": 888186.645865, "spot_account_value": 0.62629569, "total_margin_used": 95334.042996, "mean_return": 2.7292599162370945, "std_return": 2.454723139754828, "trades_per_year": 54823.324654596225, "trading_days": 36.32468502314815, "bias": 1.7173294150059704, "long_positions": 1, "short_positions": 0, "total_positions": 1, "position_bias": "å¤šå¤´", "total_position_value": 2383093.6901, "avg_hold_time": 1.7582796534989487, "hold_time_today": 0.5641523165954416, "hold_time_7d": 0.4563810798556332, "hold_time_30d": 1.9179057112511237, "roe_24h": -11.728179788060537, "roe_7d": -23.322746772853247, "roe_30d": 1.9971816831485796, "roe_all": -117.78692476949999}, {"rank": 5, "address": "0x7b7aa3257fcf2013727e0592348110de83067c1c", "total_trades": 179, "win_rate": 100.0, "sharpe_ratio": 78.51521735371108, "profit_factor": 1000.0, "total_pnl": 4220.506068, "total_realized_pnl": 4220.506068, "total_unrealized_pnl": 0, "account_value": 0.008313, "perp_account_value": 0.008313, "spot_account_value": 0.0, "total_margin_used": 0.0, "mean_return": 5.024289320561256, "std_return": 5.470559093757134, "trades_per_year": 7324.99602191368, "trading_days": 3.6873740162037034, "bias": 95.53072625698323, "long_positions": 0, "short_positions": 0, "total_positions": 0, "position_bias": "ä¸­æ€§", "total_position_value": 0, "avg_hold_time": 0.7035510994673138, "hold_time_today": 0, "hold_time_7d": 0.7035510994673138, "hold_time_30d": 0.7035510994673138, "roe_24h": 0.0, "roe_7d": 167.82741794272638, "roe_30d": 167.82741794272638, "roe_all": 167.82741794272638}, {"rank": 6, "address": "0xa006d6c9e507baedaeebe88fcd3acf646132e321", "total_trades": 26, "win_rate": 100.0, "sharpe_ratio": 78.37699109891928, "profit_factor": 1000.0, "total_pnl": 38.635807, "total_realized_pnl": 38.635807, "total_unrealized_pnl": 0, "account_value": 990.925791, "perp_account_value": 0.0, "spot_account_value": 990.925791, "total_margin_used": 0.0, "mean_return": 1.6801278531193822, "std_return": 1.1482832656709134, "trades_per_year": 2877.099677368439, "trading_days": 1.6492303125, "bias": 0.0, "long_positions": 0, "short_positions": 0, "total_positions": 0, "position_bias": "ä¸­æ€§", "total_position_value": 0, "avg_hold_time": 0.2779155448717949, "hold_time_today": 0.31112817625661376, "hold_time_7d": 0.2779155448717949, "hold_time_30d": 0.2779155448717949, "roe_24h": 1.7507742219651499, "roe_7d": 3.7618629319371726, "roe_30d": 3.7618629319371726, "roe_all": 3.7618629319371726}, {"rank": 7, "address": "0x859662a281839206b1fa46dc695c7fd55c38f33f", "total_trades": 110, "win_rate": 100.0, "sharpe_ratio": 65.50960907022451, "profit_factor": 1000.0, "total_pnl": 311.74687342, "total_realized_pnl": 311.74687342, "total_unrealized_pnl": 0, "account_value": 0.00093721, "perp_account_value": 0.0, "spot_account_value": 0.00093721, "total_margin_used": 0.0, "mean_return": 1.0614938066914394, "std_return": 0.7473531593595868, "trades_per_year": 2132.43932446532, "trading_days": 6.846619189814815, "bias": 30.454545454545453, "long_positions": 0, "short_positions": 0, "total_positions": 0, "position_bias": "ä¸­æ€§", "total_position_value": 0, "avg_hold_time": 0.15833244532627863, "hold_time_today": 0, "hold_time_7d": 0.04978240625, "hold_time_30d": 0.15833244532627863, "roe_24h": 0.0, "roe_7d": 60909.280045969266, "roe_30d": 0.3396920454544185, "roe_all": 0.3396920454544185}, {"rank": 8, "address": "0xcdd1172d31a68f6e404ad31d51fe45c5ebca90ac", "total_trades": 72, "win_rate": 100.0, "sharpe_ratio": 47.90605220562631, "profit_factor": 1000.0, "total_pnl": 2129.857784, "total_realized_pnl": 2129.857784, "total_unrealized_pnl": 0, "account_value": 0.001323, "perp_account_value": 0.001323, "spot_account_value": 0.0, "total_margin_used": 0.0, "mean_return": 11.443899120616402, "std_return": 10.32582820126154, "trades_per_year": 1870.961285200317, "trading_days": 3.5115638425925924, "bias": 93.05555555555556, "long_positions": 0, "short_positions": 0, "total_positions": 0, "position_bias": "ä¸­æ€§", "total_position_value": 0, "avg_hold_time": 0.9469772307769725, "hold_time_today": 0, "hold_time_7d": 0.9469772307769725, "hold_time_30d": 0.9469772307769725, "roe_24h": 0.0, "roe_7d": 123.02739304389476, "roe_30d": 123.02739304389476, "roe_all": 123.02739304389476}, {"rank": 9, "address": "0x1f491d285ee4eb19cc0b835723076af8d352f1d5", "total_trades": 3139, "win_rate": 91.26365054602185, "sharpe_ratio": 47.84367599157584, "profit_factor": 1.3694647979111367, "total_pnl": 10473.211652, "total_realized_pnl": 6191.7589960000005, "total_unrealized_pnl": 4281.4526559999995, "account_value": 28803.16923868, "perp_account_value": 27708.312883, "spot_account_value": 1094.85635568, "total_margin_used": 14434.029836, "mean_return": 6.56300575654466, "std_return": 8.747510987695224, "trades_per_year": 4154.787043292259, "trading_days": 112.62430423611112, "bias": 16.3109270468302, "long_positions": 3, "short_positions": 50, "total_positions": 53, "position_bias": "ç©ºå¤´", "total_position_value": 78694.282187, "avg_hold_time": 8.66130558046095, "hold_time_today": 8.493291935763889, "hold_time_7d": 21.493216913780664, "hold_time_30d": 19.089683400098064, "roe_24h": 5.317543035982246, "roe_7d": 19.322317336826718, "roe_30d": 64.53242467256605, "roe_all": 206.8825841278246}, {"rank": 10, "address": "0xa38157f31371eec73fd878097c249f16472b066c", "total_trades": 3402, "win_rate": 90.96916299559471, "sharpe_ratio": 36.6594041919581, "profit_factor": 34.9997168201162, "total_pnl": 161022.547239, "total_realized_pnl": 161022.547239, "total_unrealized_pnl": 0, "account_value": 147618.33029, "perp_account_value": 147618.33029, "spot_account_value": 0.0, "total_margin_used": 0.0, "mean_return": 0.7958539242014468, "std_return": 1.7925061947396503, "trades_per_year": 6829.605401027134, "trading_days": 121.31740435185185, "bias": 39.53556731334509, "long_positions": 0, "short_positions": 0, "total_positions": 0, "position_bias": "ä¸­æ€§", "total_position_value": 0, "avg_hold_time": 0.0871033863665544, "hold_time_today": 0, "hold_time_7d": 5.671553497942387e-05, "hold_time_30d": 0.342677458636115, "roe_24h": 0.0, "roe_7d": 77.9496045841239, "roe_30d": 180.70500044227649, "roe_all": 7061.065164061745}, {"rank": 11, "address": "0xcd87ea212314217b6aa64fdffb9954330db5de4f", "total_trades": 5262, "win_rate": 80.96459722934839, "sharpe_ratio": 35.1979575379278, "profit_factor": 8.500842350189018, "total_pnl": 76572.51943718, "total_realized_pnl": 76572.51943718, "total_unrealized_pnl": 0, "account_value": 4614.796693400001, "perp_account_value": 4576.31069, "spot_account_value": 38.4860034, "total_margin_used": 0.0, "mean_return": 1.8818524476132783, "std_return": 4.186721167518038, "trades_per_year": 6135.863876805658, "trading_days": 115.9388497337963, "bias": 38.987077156974536, "long_positions": 0, "short_positions": 0, "total_positions": 0, "position_bias": "ä¸­æ€§", "total_position_value": 0, "avg_hold_time": 0.07057774996912966, "hold_time_today": 0.007101786298690932, "hold_time_7d": 0.019428728164792193, "hold_time_30d": 0.13967558804181024, "roe_24h": 8.394778797664275, "roe_7d": 46.129206046075986, "roe_30d": 1930.804330445007, "roe_all": -28.434461999086313}, {"rank": 12, "address": "0xfe2bdf909f81b20a38122b353351c5d8deddd6f0", "total_trades": 695, "win_rate": 90.52287581699346, "sharpe_ratio": 24.572162743607194, "profit_factor": 3.178598788405895, "total_pnl": 556.6142, "total_realized_pnl": 567.03663, "total_unrealized_pnl": -10.42243, "account_value": 574.587762, "perp_account_value": 574.587762, "spot_account_value": 0.0, "total_margin_used": 357.643099, "mean_return": 1.060144408325829, "std_return": 1.8838322870996744, "trades_per_year": 1916.1200502810354, "trading_days": 58.28966717592593, "bias": 19.712230215827336, "long_positions": 1, "short_positions": 1, "total_positions": 2, "position_bias": "ä¸­æ€§", "total_position_value": 374.80006000000003, "avg_hold_time": 0.32837278836413003, "hold_time_today": 0.43795264423076924, "hold_time_7d": 0.1415499495598994, "hold_time_30d": 0.24805947404667128, "roe_24h": 4.811181188705651, "roe_7d": 47.00295415449264, "roe_30d": 106.68664558068379, "roe_all": 234.75544484210494}, {"rank": 13, "address": "0xde786a32f80731923d6297c14ef43ca1c8fd4b44", "total_trades": 112, "win_rate": 84.375, "sharpe_ratio": 22.454635651195968, "profit_factor": 2.9893046119312086, "total_pnl": 770.04831113, "total_realized_pnl": 780.53989213, "total_unrealized_pnl": -10.491581, "account_value": 603.27421796, "perp_account_value": 183.620351, "spot_account_value": 419.65386695999996, "total_margin_used": 160.340704, "mean_return": 4.79227045084018, "std_return": 7.810326160946344, "trades_per_year": 1342.9146467245694, "trading_days": 8.697499895833333, "bias": 56.25, "long_positions": 2, "short_positions": 0, "total_positions": 2, "position_bias": "å¤šå¤´", "total_position_value": 623.783458, "avg_hold_time": 0.803816929296024, "hold_time_today": 0.3139819322612086, "hold_time_7d": 0.8123711397792023, "hold_time_30d": 0.803816929296024, "roe_24h": -2.9303318838369554, "roe_7d": 71.14737249647182, "roe_30d": 394.11968506929344, "roe_all": 394.11968506929344}, {"rank": 14, "address": "0x9da99bb7950b89ebb1d882bbb735f91b62f293f0", "total_trades": 11676, "win_rate": 89.6632848110572, "sharpe_ratio": 18.89730007959604, "profit_factor": 7.541820497571648, "total_pnl": 46396.41704601, "total_realized_pnl": 46396.48713501, "total_unrealized_pnl": -0.070089, "account_value": 4778.3078054200005, "perp_account_value": 4778.30208, "spot_account_value": 0.00572542, "total_margin_used": 17.248109, "mean_return": 0.26375491657572364, "std_return": 2.309641762725184, "trades_per_year": 27896.701313106816, "trading_days": 88.98417673611111, "bias": 27.136861939020214, "long_positions": 0, "short_positions": 1, "total_positions": 1, "position_bias": "ç©ºå¤´", "total_position_value": 51.74972, "avg_hold_time": 0.30101499777096546, "hold_time_today": 0.07144480092592594, "hold_time_7d": 0.4954382585611405, "hold_time_30d": 0.4709675805707568, "roe_24h": 0.15112340135626037, "roe_7d": -3.6915597297346845, "roe_30d": 15.066438107005487, "roe_all": 675.6216681583902}, {"rank": 15, "address": "0x7a6619c6f52063c4143d3142be56adbeec6a7b70", "total_trades": 343, "win_rate": 89.70588235294117, "sharpe_ratio": 13.829807954579405, "profit_factor": 19.605919443906014, "total_pnl": 40.48311769, "total_realized_pnl": 40.48311769, "total_unrealized_pnl": 0, "account_value": 87.73913777000001, "perp_account_value": 87.736438, "spot_account_value": 0.00269977, "total_margin_used": 0.0, "mean_return": 0.8162551573240298, "std_return": 3.1110173193806934, "trades_per_year": 2780.058556362711, "trading_days": 17.85573900462963, "bias": 34.69387755102041, "long_positions": 0, "short_positions": 0, "total_positions": 0, "position_bias": "ä¸­æ€§", "total_position_value": 0, "avg_hold_time": 0.031171575360082304, "hold_time_today": 0.009641569138071895, "hold_time_7d": 0.007752401945484811, "hold_time_30d": 0.031171575360082304, "roe_24h": 115095.88736569099, "roe_7d": 3.7718673603611683, "roe_30d": 72.81125826767196, "roe_all": 72.81125826767196}, {"rank": 16, "address": "0xfbd99a273f18714c3893708a47b796a7ed6cbd4f", "total_trades": 28, "win_rate": 92.3076923076923, "sharpe_ratio": 5.695168922692522, "profit_factor": 6.50344986976048, "total_pnl": 88.463719, "total_realized_pnl": 86.528699, "total_unrealized_pnl": 1.9350200000000002, "account_value": 389.02708542, "perp_account_value": 269.055208, "spot_account_value": 119.97187742, "total_margin_used": 101.840263, "mean_return": 15.974228393193274, "std_return": 12.533690018442462, "trades_per_year": 20.024447768606475, "trading_days": 236.9603424189815, "bias": 5.357142857142854, "long_positions": 1, "short_positions": 2, "total_positions": 3, "position_bias": "ç©ºå¤´", "total_position_value": 209.23141, "avg_hold_time": 2.789205871616809, "hold_time_today": 0.8100218518518519, "hold_time_7d": 3.147271525462963, "hold_time_30d": 2.92882043595679, "roe_24h": 3.230831872369497, "roe_7d": 87.38004761284594, "roe_30d": 100.50689034418814, "roe_all": 273.58008792752156}, {"rank": 17, "address": "0x2f4974af193f3b57218f6ba3f2ecff0651b2f33d", "total_trades": 2966, "win_rate": 91.5743861338469, "sharpe_ratio": 3.8630076481936193, "profit_factor": 0.6289335870852353, "total_pnl": -3735.753316, "total_realized_pnl": -3392.9806519999997, "total_unrealized_pnl": -342.77266399999996, "account_value": 2389.197558, "perp_account_value": 2389.197558, "spot_account_value": 0.0, "total_margin_used": 1487.82025, "mean_return": 0.4816063588375122, "std_return": 11.345641475476015, "trades_per_year": 8882.325994943694, "trading_days": 85.34982846064814, "bias": 50.79231287929872, "long_positions": 46, "short_positions": 24, "total_positions": 70, "position_bias": "å¤šå¤´", "total_position_value": 5408.527816999998, "avg_hold_time": 2.0453620466611313, "hold_time_today": 0.8549161643073362, "hold_time_7d": 1.737670559499662, "hold_time_30d": 2.3189308511151134, "roe_24h": 1.7301024303097656, "roe_7d": -66.34052888507553, "roe_30d": -57.16351910531612, "roe_all": -269.6910896240799}, {"rank": 18, "address": "0x278c6a51c509d213b3772fbe09264c1c18da81f9", "total_trades": 10055, "win_rate": 94.09730228268388, "sharpe_ratio": 1.7204793196758408, "profit_factor": 0.8417612167140566, "total_pnl": -26779.44766699, "total_realized_pnl": -25235.93170499, "total_unrealized_pnl": -1543.5159620000002, "account_value": 5310.01991111, "perp_account_value": 5309.82826, "spot_account_value": 0.19165110999999999, "total_margin_used": 2374.393733, "mean_return": 0.14283685685264588, "std_return": 6.1837928573717535, "trades_per_year": 6941.537203249912, "trading_days": 228.04819071759258, "bias": 49.910492292391844, "long_positions": 13, "short_positions": 3, "total_positions": 16, "position_bias": "å¤šå¤´", "total_position_value": 24102.156057999997, "avg_hold_time": 1.8695185416052928, "hold_time_today": 2.9709781235532406, "hold_time_7d": 11.60429580162037, "hold_time_30d": 4.084757623848151, "roe_24h": -7.387433528956377, "roe_7d": -44.82251267840289, "roe_30d": -58.47099363844447, "roe_all": -4683.26982449063}, {"rank": 19, "address": "0xb7c6c05dd58b6b6281295a499d8bdb9be22712ea", "total_trades": 2, "win_rate": 100.0, "sharpe_ratio": 0, "profit_factor": 1000.0, "total_pnl": 96.21771, "total_realized_pnl": 96.21771, "total_unrealized_pnl": 0, "account_value": 593.802465, "perp_account_value": 593.802465, "spot_account_value": 0.0, "total_margin_used": 0.0, "mean_return": 0, "std_return": 0, "trades_per_year": 0, "trading_days": 0, "bias": 0.0, "long_positions": 0, "short_positions": 0, "total_positions": 0, "position_bias": "ä¸­æ€§", "total_position_value": 0, "avg_hold_time": 0.5093982175925926, "hold_time_today": 0.5093982175925926, "hold_time_7d": 0.5093982175925926, "hold_time_30d": 0.5093982175925926, "roe_24h": 9.989455578053185, "roe_7d": 14.156110397489924, "roe_30d": 14.156110397489924, "roe_all": 14.156110397489924}, {"rank": 20, "address": "0x5843ec7344670a4d13c25fb302ecfc6e488b15c5", "total_trades": 6047, "win_rate": 90.57104913678619, "sharpe_ratio": -0.6824325102329117, "profit_factor": 2.828217413965316, "total_pnl": 49027.59851466, "total_realized_pnl": 48566.02574666, "total_unrealized_pnl": 461.57276799999994, "account_value": 10820.217926250001, "perp_account_value": 10819.497981, "spot_account_value": 0.71994525, "total_margin_used": 385.392192, "mean_return": -4148.412473146484, "std_return": 227760.8693253768, "trades_per_year": 1403.7922660079244, "trading_days": 783.1500618865741, "bias": 59.07061352736895, "long_positions": 1, "short_positions": 1, "total_positions": 2, "position_bias": "ä¸­æ€§", "total_position_value": 4251.28316, "avg_hold_time": 6.445087706313623, "hold_time_today": 0, "hold_time_7d": 0.9908940329218107, "hold_time_30d": 4.7970739567089025, "roe_24h": -0.9875595558889573, "roe_7d": 2.7264815150324377, "roe_30d": 8.551953115231727, "roe_all": 3156.504862224064}];

        // åˆ—å®šä¹‰
        const columns = [
            // åŸºç¡€ä¿¡æ¯
            { key: 'rank', label: '#', format: v => v, defaultVisible: true },
            { key: 'address', label: 'åœ°å€', format: v => v, defaultVisible: true, isAddress: true },
            // æ ¸å¿ƒäº¤æ˜“æŒ‡æ ‡
            { key: 'total_trades', label: 'äº¤æ˜“æ•°', format: v => v.toLocaleString(), defaultVisible: true },
            { key: 'win_rate', label: 'èƒœç‡', format: v => v.toFixed(1) + '%', defaultVisible: true },
            { key: 'sharpe_ratio', label: 'å¤æ™®æ¯”ç‡', format: v => v.toFixed(2), defaultVisible: true, colorByValue: true },
            { key: 'profit_factor', label: 'ç›ˆåˆ©å› å­', format: v => v >= 1000 ? 'âˆ' : v.toFixed(2), defaultVisible: true, colorByValue: true, threshold: 1 },
            // ç›ˆäºæŒ‡æ ‡
            { key: 'total_pnl', label: 'æ€»PNL', format: v => formatCurrency(v), defaultVisible: true, colorByValue: true, isCurrency: true },
            { key: 'total_realized_pnl', label: 'å·²å®ç°PNL', format: v => formatCurrency(v), defaultVisible: false, colorByValue: true, isCurrency: true },
            { key: 'total_unrealized_pnl', label: 'æœªå®ç°PNL', format: v => formatCurrency(v), defaultVisible: false, colorByValue: true, isCurrency: true },
            // è´¦æˆ·ä¿¡æ¯
            { key: 'account_value', label: 'è´¦æˆ·ä»·å€¼', format: v => formatCurrency(v), defaultVisible: true, isCurrency: true },
            { key: 'perp_account_value', label: 'Perpè´¦æˆ·', format: v => formatCurrency(v), defaultVisible: false, isCurrency: true },
            { key: 'spot_account_value', label: 'Spotè´¦æˆ·', format: v => formatCurrency(v), defaultVisible: false, isCurrency: true },
            { key: 'total_margin_used', label: 'ä¿è¯é‡‘ä½¿ç”¨', format: v => formatCurrency(v), defaultVisible: false, isCurrency: true },
            // æ”¶ç›Šç‡æŒ‡æ ‡
            { key: 'mean_return', label: 'å¹³å‡æ”¶ç›Šç‡', format: v => v.toFixed(2) + '%', defaultVisible: true, colorByValue: true },
            { key: 'std_return', label: 'æ”¶ç›Šç‡æ ‡å‡†å·®', format: v => v.toFixed(2) + '%', defaultVisible: false },
            { key: 'trades_per_year', label: 'å¹´äº¤æ˜“é¢‘ç‡', format: v => v.toFixed(0), defaultVisible: false },
            { key: 'trading_days', label: 'äº¤æ˜“å¤©æ•°', format: v => v.toFixed(1), defaultVisible: false },
            // æ–¹å‘åå¥½
            { key: 'bias', label: 'æ–¹å‘åå¥½%', format: v => v.toFixed(1) + '%', defaultVisible: false },
            { key: 'position_bias', label: 'ä»“ä½åå¥½', format: v => v, defaultVisible: false },
            { key: 'long_positions', label: 'å¤šå¤´æŒä»“', format: v => v, defaultVisible: false },
            { key: 'short_positions', label: 'ç©ºå¤´æŒä»“', format: v => v, defaultVisible: false },
            { key: 'total_positions', label: 'å½“å‰æŒä»“æ•°', format: v => v, defaultVisible: false },
            { key: 'total_position_value', label: 'æŒä»“æ€»ä»·å€¼', format: v => formatCurrency(v), defaultVisible: false, isCurrency: true },
            // æŒä»“æ—¶é—´
            { key: 'avg_hold_time', label: 'å†å²å¹³å‡æŒä»“', format: v => formatHoldTime(v), defaultVisible: true },
            { key: 'hold_time_today', label: 'ä»Šæ—¥å¹³å‡æŒä»“', format: v => formatHoldTime(v), defaultVisible: false },
            { key: 'hold_time_7d', label: '7å¤©å¹³å‡æŒä»“', format: v => formatHoldTime(v), defaultVisible: false },
            { key: 'hold_time_30d', label: '30å¤©å¹³å‡æŒä»“', format: v => formatHoldTime(v), defaultVisible: false },
            // ROE æŒ‡æ ‡
            { key: 'roe_24h', label: 'ROE(24h)', format: v => (v >= 0 ? '+' : '') + v.toFixed(2) + '%', defaultVisible: true, colorByValue: true },
            { key: 'roe_7d', label: 'ROE(7d)', format: v => (v >= 0 ? '+' : '') + v.toFixed(2) + '%', defaultVisible: false, colorByValue: true },
            { key: 'roe_30d', label: 'ROE(30d)', format: v => (v >= 0 ? '+' : '') + v.toFixed(2) + '%', defaultVisible: false, colorByValue: true },
            { key: 'roe_all', label: 'ROE(å†å²)', format: v => (v >= 0 ? '+' : '') + v.toFixed(2) + '%', defaultVisible: false, colorByValue: true },
        ];

        // å¯è§åˆ—
        let visibleColumns = columns.filter(c => c.defaultVisible).map(c => c.key);

        // å½“å‰æ’åº
        let currentSort = { key: 'rank', dir: 'asc' };

        // ç­›é€‰æ¡ä»¶
        let filters = [];

        // è·å–å¯ç­›é€‰çš„æ•°å€¼åˆ—ï¼ˆæ’é™¤åœ°å€å’Œæ–‡æœ¬åˆ—ï¼‰
        const filterableColumns = columns.filter(c =>
            c.key !== 'address' && c.key !== 'position_bias' && c.key !== 'rank'
        );

        // æ ¼å¼åŒ–å‡½æ•°
        function formatCurrency(value) {
            if (Math.abs(value) >= 1000000) {
                return '$' + (value / 1000000).toFixed(2) + 'M';
            } else if (Math.abs(value) >= 1000) {
                return '$' + value.toLocaleString(undefined, { maximumFractionDigits: 0 });
            } else {
                return '$' + value.toFixed(2);
            }
        }

        function formatHoldTime(days) {
            if (days === 0) return '0';
            if (days >= 1) return days.toFixed(1) + 'å¤©';
            if (days >= 1/24) return (days * 24).toFixed(1) + 'æ—¶';
            return (days * 24 * 60).toFixed(0) + 'åˆ†';
        }

        // æ¸²æŸ“è¡¨å¤´
        function renderHeader() {
            const header = document.getElementById('tableHeader');
            header.innerHTML = '';

            visibleColumns.forEach(key => {
                const col = columns.find(c => c.key === key);
                const th = document.createElement('th');
                th.dataset.key = key;
                th.innerHTML = `${col.label} <span class="sort-icon"></span>`;

                if (currentSort.key === key) {
                    th.classList.add(currentSort.dir === 'asc' ? 'sort-asc' : 'sort-desc');
                }

                th.addEventListener('click', () => sortTable(key));
                header.appendChild(th);
            });
        }

        // æ¸²æŸ“è¡¨æ ¼æ•°æ®
        function renderTable(data) {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';

            data.forEach(row => {
                const tr = document.createElement('tr');

                visibleColumns.forEach(key => {
                    const col = columns.find(c => c.key === key);
                    const td = document.createElement('td');
                    const value = row[key];

                    // æ ¼å¼åŒ–æ˜¾ç¤º
                    td.textContent = col.format(value);

                    // ç‰¹æ®Šæ ·å¼
                    if (col.isAddress) {
                        td.classList.add('address');
                    }

                    if (key === 'rank') {
                        td.classList.add('rank');
                    }

                    // æ ¹æ®å€¼ç€è‰²
                    if (col.colorByValue) {
                        const threshold = col.threshold || 0;
                        if (value > threshold) {
                            td.classList.add('positive', 'highlight');
                        } else if (value < threshold) {
                            td.classList.add('negative');
                        } else {
                            td.classList.add('neutral');
                        }
                    }

                    tr.appendChild(td);
                });

                tbody.appendChild(tr);
            });
        }

        // æ’åºè¡¨æ ¼
        function sortTable(key) {
            if (currentSort.key === key) {
                currentSort.dir = currentSort.dir === 'asc' ? 'desc' : 'asc';
            } else {
                currentSort.key = key;
                currentSort.dir = 'desc';
            }

            renderHeader();
            applyFiltersAndRender();
        }

        // æœç´¢è¯
        let searchTerm = '';

        // åº”ç”¨æ‰€æœ‰ç­›é€‰æ¡ä»¶å¹¶è¿”å›æ•°æ®
        function getFilteredData() {
            let data = [...tableData];

            // åº”ç”¨åœ°å€æœç´¢
            if (searchTerm) {
                data = data.filter(row =>
                    row.address.toLowerCase().includes(searchTerm.toLowerCase())
                );
            }

            // åº”ç”¨æ•°å€¼ç­›é€‰
            filters.forEach(filter => {
                data = data.filter(row => {
                    const value = row[filter.column];
                    switch (filter.operator) {
                        case 'gt': return value > filter.value1;
                        case 'gte': return value >= filter.value1;
                        case 'lt': return value < filter.value1;
                        case 'lte': return value <= filter.value1;
                        case 'eq': return value === filter.value1;
                        case 'between': return value >= filter.value1 && value <= filter.value2;
                        default: return true;
                    }
                });
            });

            return data;
        }

        // åº”ç”¨æ’åºå¹¶æ¸²æŸ“
        function applyFiltersAndRender() {
            let data = getFilteredData();

            // åº”ç”¨æ’åº
            data.sort((a, b) => {
                let aVal = a[currentSort.key];
                let bVal = b[currentSort.key];

                if (typeof aVal === 'string') {
                    return currentSort.dir === 'asc'
                        ? aVal.localeCompare(bVal)
                        : bVal.localeCompare(aVal);
                }

                return currentSort.dir === 'asc' ? aVal - bVal : bVal - aVal;
            });

            renderTable(data);
            updateFilterResultCount(data.length);
            renderActiveFilters();
        }

        // æ›´æ–°ç­›é€‰ç»“æœè®¡æ•°
        function updateFilterResultCount(count) {
            const el = document.getElementById('filterResultCount');
            if (filters.length > 0 || searchTerm) {
                el.textContent = `æ˜¾ç¤º ${count} / ${tableData.length} æ¡è®°å½•`;
            } else {
                el.textContent = '';
            }
        }

        // æ¸²æŸ“æ´»åŠ¨ç­›é€‰æ ‡ç­¾
        function renderActiveFilters() {
            const container = document.getElementById('activeFilters');
            container.innerHTML = '';

            filters.forEach((filter, index) => {
                const col = columns.find(c => c.key === filter.column);
                const badge = document.createElement('span');
                badge.className = 'filter-badge';

                let text = col.label + ' ';
                switch (filter.operator) {
                    case 'gt': text += '> ' + filter.value1; break;
                    case 'gte': text += 'â‰¥ ' + filter.value1; break;
                    case 'lt': text += '< ' + filter.value1; break;
                    case 'lte': text += 'â‰¤ ' + filter.value1; break;
                    case 'eq': text += '= ' + filter.value1; break;
                    case 'between': text += filter.value1 + ' ~ ' + filter.value2; break;
                }

                badge.innerHTML = text + ' <span class="filter-badge-remove" data-index="' + index + '">Ã—</span>';
                container.appendChild(badge);
            });

            // ç»‘å®šåˆ é™¤äº‹ä»¶
            container.querySelectorAll('.filter-badge-remove').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const idx = parseInt(e.target.dataset.index);
                    filters.splice(idx, 1);
                    renderFilterList();
                    applyFiltersAndRender();
                });
            });
        }

        // æ¸²æŸ“ç­›é€‰æ¡ä»¶åˆ—è¡¨
        function renderFilterList() {
            const list = document.getElementById('filterList');
            list.innerHTML = '';

            filters.forEach((filter, index) => {
                const row = document.createElement('div');
                row.className = 'filter-row';

                // åˆ—é€‰æ‹©
                const colSelect = document.createElement('select');
                colSelect.className = 'filter-select';
                filterableColumns.forEach(col => {
                    const opt = document.createElement('option');
                    opt.value = col.key;
                    opt.textContent = col.label;
                    opt.selected = col.key === filter.column;
                    colSelect.appendChild(opt);
                });

                // æ“ä½œç¬¦é€‰æ‹©
                const opSelect = document.createElement('select');
                opSelect.className = 'filter-select';
                const operators = [
                    { value: 'gt', label: 'å¤§äº (>)' },
                    { value: 'gte', label: 'å¤§äºç­‰äº (â‰¥)' },
                    { value: 'lt', label: 'å°äº (<)' },
                    { value: 'lte', label: 'å°äºç­‰äº (â‰¤)' },
                    { value: 'eq', label: 'ç­‰äº (=)' },
                    { value: 'between', label: 'åŒºé—´' }
                ];
                operators.forEach(op => {
                    const opt = document.createElement('option');
                    opt.value = op.value;
                    opt.textContent = op.label;
                    opt.selected = op.value === filter.operator;
                    opSelect.appendChild(opt);
                });

                // æ•°å€¼è¾“å…¥1
                const input1 = document.createElement('input');
                input1.type = 'number';
                input1.step = 'any';
                input1.className = 'filter-input';
                input1.placeholder = 'æ•°å€¼';
                input1.value = filter.value1 || '';

                // æ•°å€¼è¾“å…¥2ï¼ˆåŒºé—´ç”¨ï¼‰
                const input2 = document.createElement('input');
                input2.type = 'number';
                input2.step = 'any';
                input2.className = 'filter-input';
                input2.placeholder = 'æœ€å¤§å€¼';
                input2.value = filter.value2 || '';
                input2.style.display = filter.operator === 'between' ? 'block' : 'none';

                // åˆ é™¤æŒ‰é’®
                const removeBtn = document.createElement('button');
                removeBtn.className = 'filter-btn filter-btn-remove';
                removeBtn.textContent = 'Ã—';

                // äº‹ä»¶ç»‘å®š
                colSelect.addEventListener('change', () => {
                    filters[index].column = colSelect.value;
                    applyFiltersAndRender();
                });

                opSelect.addEventListener('change', () => {
                    filters[index].operator = opSelect.value;
                    input2.style.display = opSelect.value === 'between' ? 'block' : 'none';
                    applyFiltersAndRender();
                });

                input1.addEventListener('input', () => {
                    filters[index].value1 = parseFloat(input1.value) || 0;
                    applyFiltersAndRender();
                });

                input2.addEventListener('input', () => {
                    filters[index].value2 = parseFloat(input2.value) || 0;
                    applyFiltersAndRender();
                });

                removeBtn.addEventListener('click', () => {
                    filters.splice(index, 1);
                    renderFilterList();
                    applyFiltersAndRender();
                });

                row.appendChild(colSelect);
                row.appendChild(opSelect);
                row.appendChild(input1);
                row.appendChild(input2);
                row.appendChild(removeBtn);
                list.appendChild(row);
            });
        }

        // æ·»åŠ ç­›é€‰æ¡ä»¶
        function addFilter() {
            filters.push({
                column: filterableColumns[0].key,
                operator: 'gt',
                value1: 0,
                value2: 0
            });
            renderFilterList();
        }

        // æ¸…é™¤æ‰€æœ‰ç­›é€‰
        function clearFilters() {
            filters = [];
            renderFilterList();
            applyFiltersAndRender();
        }

        // åˆ—é€‰æ‹©å™¨
        function renderColumnMenu() {
            const menu = document.getElementById('columnMenu');
            menu.innerHTML = '';

            // æ·»åŠ å…¨é€‰/å–æ¶ˆå…¨é€‰æŒ‰é’®
            const btnContainer = document.createElement('div');
            btnContainer.className = 'column-menu-buttons';

            const selectAllBtn = document.createElement('button');
            selectAllBtn.className = 'column-menu-btn';
            selectAllBtn.textContent = 'å…¨é€‰';
            selectAllBtn.addEventListener('click', () => {
                visibleColumns = columns.map(c => c.key);
                renderHeader();
                sortTable(currentSort.key);
                renderColumnMenu();
            });

            const deselectAllBtn = document.createElement('button');
            deselectAllBtn.className = 'column-menu-btn';
            deselectAllBtn.textContent = 'å–æ¶ˆå…¨é€‰';
            deselectAllBtn.addEventListener('click', () => {
                // ä¿ç•™åŸºç¡€åˆ—ï¼šæ’åå’Œåœ°å€
                visibleColumns = ['rank', 'address'];
                renderHeader();
                sortTable(currentSort.key);
                renderColumnMenu();
            });

            btnContainer.appendChild(selectAllBtn);
            btnContainer.appendChild(deselectAllBtn);
            menu.appendChild(btnContainer);

            // åˆ—å¤é€‰æ¡†
            columns.forEach(col => {
                const label = document.createElement('label');
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.checked = visibleColumns.includes(col.key);
                checkbox.addEventListener('change', () => {
                    if (checkbox.checked) {
                        visibleColumns.push(col.key);
                    } else {
                        visibleColumns = visibleColumns.filter(k => k !== col.key);
                    }
                    // ä¿æŒåŸå§‹é¡ºåº
                    visibleColumns = columns.filter(c => visibleColumns.includes(c.key)).map(c => c.key);
                    renderHeader();
                    sortTable(currentSort.key);
                });

                label.appendChild(checkbox);
                label.appendChild(document.createTextNode(' ' + col.label));
                menu.appendChild(label);
            });
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            renderHeader();
            renderTable(tableData);
            renderColumnMenu();
            renderFilterList();

            // æœç´¢äº‹ä»¶
            document.getElementById('searchInput').addEventListener('input', e => {
                searchTerm = e.target.value;
                applyFiltersAndRender();
            });

            // ç­›é€‰å™¨æŒ‰é’®äº‹ä»¶
            document.getElementById('addFilterBtn').addEventListener('click', addFilter);
            document.getElementById('clearFiltersBtn').addEventListener('click', clearFilters);

            // åˆ—é€‰æ‹©å™¨åˆ‡æ¢
            const toggle = document.getElementById('columnToggle');
            const menu = document.getElementById('columnMenu');

            toggle.addEventListener('click', () => {
                menu.classList.toggle('show');
            });

            document.addEventListener('click', e => {
                if (!toggle.contains(e.target) && !menu.contains(e.target)) {
                    menu.classList.remove('show');
                }
            });
        });
    </script>
</body>
</html>
