# Sharpe Ratio（夏普比率）- 可视化示例

## 📊 图表示例

### 示例 1：风险调整后收益的直观理解

```
场景对比：两个策略的选择

策略 A（高收益高风险）：
══════════════════════════════════════════════════════════
平均收益率：     30%  ████████████████████████████████
收益率标准差：   25%  █████████████████████████████
无风险利率：      3%  ████

超额收益 = 30% - 3% = 27%
Sharpe Ratio = 27% / 25% = 1.08  ⚠️

评级：🟡 良好（但波动大，心理压力高）
══════════════════════════════════════════════════════════

策略 B（中收益低风险）：
══════════════════════════════════════════════════════════
平均收益率：     15%  ███████████████████
收益率标准差：    5%  ██████
无风险利率：      3%  ████

超额收益 = 15% - 3% = 12%
Sharpe Ratio = 12% / 5% = 2.40  ✅

评级：🟢 优秀（稳定增长，风险可控）
══════════════════════════════════════════════════════════

关键洞察：
💡 策略 A 收益更高（30% vs 15%），但 Sharpe 更低（1.08 vs 2.40）
💡 策略 B 每承担1%风险获得2.4%超额收益
💡 策略 A 每承担1%风险只获得1.08%超额收益
💡 从风险调整角度，策略 B 更优秀
```

---

### 示例 2：单笔交易 Sharpe 计算拆解

```
交易详情：
─────────────────────────────────────────────────────────────
币种：ETH
开仓：买入 10 个 @ $2,000
平仓：卖出 10 个 @ $2,050
持仓时间：3 天
盈亏：$500

计算步骤：
┌──────────────────────────────────────────────────────────┐
│ Step 1: 计算持仓价值                                      │
│   Notional Value = |sz| × px                             │
│                  = |10| × $2,000                         │
│                  = $20,000                               │
│                                                          │
│ Step 2: 计算单笔收益率                                    │
│   r = closedPnL / Notional Value                        │
│     = $500 / $20,000                                     │
│     = 0.025 = 2.5%                                       │
│                                                          │
│ Step 3: 计算每笔无风险利率（年化3%，持仓3天）              │
│   rf_trade = (1 + 0.03)^(3/365) - 1                     │
│            = 1.03^0.0082 - 1                             │
│            = 0.000245 = 0.0245%                          │
│                                                          │
│ Step 4: 计算超额收益                                      │
│   超额收益 = 2.5% - 0.0245% = 2.4755%                    │
└──────────────────────────────────────────────────────────┘

可视化对比：
  无风险收益 0.0245%  █
  实际收益   2.50%     ██████████████████████████
                       ↑
              超额收益 = 2.4755%
```

---

### 示例 3：多笔交易的 Sharpe 计算

```
交易记录（10笔交易）：
══════════════════════════════════════════════════════════════════
Trade#  Notional    closedPnL   Return   超额收益   图示
──────────────────────────────────────────────────────────────────
  1     $20,000      $500       2.50%    2.48%     ▓▓▓
  2     $18,000      $540       3.00%    2.98%     ▓▓▓▓
  3     $22,000     -$220      -1.00%   -1.02%     ░░
  4     $25,000      $625       2.50%    2.48%     ▓▓▓
  5     $19,000      $380       2.00%    1.98%     ▓▓
  6     $21,000     -$210      -1.00%   -1.02%     ░░
  7     $23,000      $920       4.00%    3.98%     ▓▓▓▓▓
  8     $20,000      $300       1.50%    1.48%     ▓▓
  9     $24,000      $720       3.00%    2.98%     ▓▓▓▓
 10     $22,000      $440       2.00%    1.98%     ▓▓
══════════════════════════════════════════════════════════════════

统计计算：
┌─────────────────────────────────────────────────────────────┐
│ 平均收益率 μ = (2.5 + 3.0 - 1.0 + ... + 2.0) / 10        │
│              = 18.5% / 10                                   │
│              = 1.85%                                        │
│                                                             │
│ 标准差 σ = √[Σ(rᵢ - 1.85%)² / (10-1)]                     │
│          = √[0.000239 / 9]                                  │
│          = √0.0000266                                       │
│          = 0.0163 = 1.63%                                   │
│                                                             │
│ 平均持仓时间 = 3天                                          │
│ 每笔无风险利率 = 0.0245%                                    │
│                                                             │
│ Sharpe_per_trade = (1.85% - 0.0245%) / 1.63%              │
│                  = 1.8255% / 1.63%                         │
│                  = 1.12                                     │
└─────────────────────────────────────────────────────────────┘

收益率分布图：
  4.0% ┤        ▓
  3.0% ┤    ▓       ▓
  2.5% ┤▓       ▓
  2.0% ┤        ▓       ▓
  1.5% ┤    ▓
  0.0% ┼─────────────────────────
 -1.0% ┤  ░   ░
       └┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─
        1 2 3 4 5 6 7 8 9 10
          交易序号

平均线 ━━━━━━━ (1.85%)
```

---

### 示例 4：年化 Sharpe Ratio 计算

```
基于上述 10 笔交易的年化计算：
══════════════════════════════════════════════════════════════

交易数据：
┌──────────────────────────────────────────────────────────┐
│ 总交易数：10 笔                                           │
│ 交易周期：30 天（第一笔到最后一笔的时间跨度）               │
│ 每笔 Sharpe：1.12                                        │
└──────────────────────────────────────────────────────────┘

年交易频率计算：
┌──────────────────────────────────────────────────────────┐
│ trades_per_year = (10 / 30) × 365                        │
│                 = 0.333 × 365                            │
│                 = 121.7 笔/年                            │
└──────────────────────────────────────────────────────────┘

年化 Sharpe 计算：
┌──────────────────────────────────────────────────────────┐
│ Sharpe_annual = Sharpe_per_trade × √trades_per_year     │
│               = 1.12 × √121.7                            │
│               = 1.12 × 11.03                             │
│               = 12.35                                    │
└──────────────────────────────────────────────────────────┘

评级：🏆 卓越（年化 Sharpe > 3）

频率影响可视化：
             年交易频率
                ↓
  低频 ─────────┼─────────→ 高频
   50笔        121笔        500笔
    │           │            │
   7.9        12.35        25.0  ← 年化 Sharpe
    │           │            │
   🟡          🏆           🏆

关键洞察：
💡 交易频率越高，年化 Sharpe 越高（√N 效应）
💡 121笔/年 → √121 ≈ 11倍放大效应
💡 每笔 Sharpe 1.12 → 年化 12.35
```

---

### 示例 5：真实数据完整分析（地址 0x67e4d5）

```
用户：0x67e4d5c95fdd024d136d520b3432ad0f94ed5081
交易时间：2024-08-15 至 2024-12-30（137天）
总交易数：35笔
══════════════════════════════════════════════════════════════

收益率分布直方图：
  35%  ┤                                          ▓
  30%  ┤                                    ▓
  25%  ┤                                    ▓
  20%  ┤                          ▓         ▓
  15%  ┤                    ▓     ▓         ▓     ▓
  10%  ┤              ▓     ▓     ▓         ▓     ▓
   5%  ┤▓  ▓  ▓  ▓    ▓     ▓     ▓         ▓     ▓  ▓
   0%  ┴────────────────────────────────────────────────
       0  3  6  9  12 15 18 21 24 27 30 33 36 39 42
                    收益率 (%) →

统计指标：
┌──────────────────────────────────────────────────────────┐
│ 平均收益率：    15.82%  ███████████████████              │
│ 收益率标准差：   8.89%  ██████████                       │
│ 最小收益率：     2.96%  ████                             │
│ 最大收益率：    35.12%  ████████████████████████████████ │
│ 胜率：         100.00%  ✅ 完美（无亏损交易）             │
└──────────────────────────────────────────────────────────┘

Sharpe Ratio 计算：
┌──────────────────────────────────────────────────────────┐
│ 1. 平均持仓时间 = 3.9 天                                  │
│                                                          │
│ 2. 每笔无风险利率 = (1.03)^(3.9/365) - 1                │
│                   = 0.0315%                              │
│                                                          │
│ 3. 每笔 Sharpe = (15.82% - 0.0315%) / 8.89%             │
│                = 15.7885% / 8.89%                        │
│                = 1.776                                   │
│                                                          │
│ 4. 年交易频率 = (35 / 137) × 365                         │
│               = 93.25 笔/年                              │
│                                                          │
│ 5. 年化 Sharpe = 1.776 × √93.25                         │
│                = 1.776 × 9.657                           │
│                = 17.15                                   │
└──────────────────────────────────────────────────────────┘

评级仪表盘：
┌──────────────────────────────────────────────────────────┐
│                                                          │
│          年化 Sharpe Ratio: 17.15                        │
│                                                          │
│   ────┬────┬────┬────┬────┬────┬────┬────               │
│    差 │一般│良好│优秀│ 卓越            ★                 │
│       0    1    2    3    5   10   15   20              │
│                                         ↑                │
│                                      17.15               │
│                                                          │
│   🏆 极罕见的卓越表现（超越99%的策略）                    │
└──────────────────────────────────────────────────────────┘
```

---

### 示例 6：不同策略类型的 Sharpe 对比

```
三种典型策略的 Sharpe Ratio 分析：
══════════════════════════════════════════════════════════════

策略 A：高频套利（低风险高频）
──────────────────────────────────────────────────────────────
平均收益率：  0.3%   ████
标准差：     0.1%   ██
每笔 Sharpe： 2.98   ████████████████████
年交易频率： 500笔   ████████████████████████████████
年化 Sharpe： 66.7   🏆🏆🏆🏆🏆

收益风险图：
  收益 ▲
       │
  0.3% ├─▓
       │  ▓
       │   ▓
       │    ▓
       │     ▓────────→ 低风险
  0%   └──────────────────────── 风险
           0.1%

评价：✅ 极高 Sharpe，但单笔收益低，需要极高频率
─────────────────────────────────────────────────────────────

策略 B：趋势跟踪（中收益高风险）
──────────────────────────────────────────────────────────────
平均收益率：  8.0%   ████████████████
标准差：    12.0%   ████████████████████████
每笔 Sharpe： 0.66   ████████
年交易频率：  40笔   ████████
年化 Sharpe： 4.21   🟢🟢

收益风险图：
  收益 ▲
       │
  8.0% ├──────────▓
       │           ▓
       │            ▓
       │             ▓
       │              ▓────→ 高风险
  0%   └──────────────────────── 风险
                  12%

评价：🟡 中等 Sharpe，高波动但高收益，需强心理承受力
─────────────────────────────────────────────────────────────

策略 C：稳健增长（中收益低风险）
──────────────────────────────────────────────────────────────
平均收益率：  4.0%   ████████
标准差：     2.0%   ████
每笔 Sharpe： 2.00   ████████████████
年交易频率： 100笔   ████████████████████
年化 Sharpe：20.00   🏆🏆🏆🏆

收益风险图：
  收益 ▲
       │
  4.0% ├────▓
       │     ▓
       │      ▓
       │       ▓────→ 低风险
       │
  0%   └──────────────────────── 风险
              2%

评价：✅ 优秀 Sharpe，平衡风险与收益，最佳选择
─────────────────────────────────────────────────────────────

综合对比表：
┌─────────┬────────┬──────┬─────────┬──────────┬──────┐
│ 策略    │ 收益率 │ 风险 │ 每笔SR  │ 年化SR   │ 推荐 │
├─────────┼────────┼──────┼─────────┼──────────┼──────┤
│ A 套利  │ ⭐     │ ⭐⭐⭐⭐ │ ⭐⭐⭐    │ ⭐⭐⭐⭐⭐  │ 🟡   │
│ B 趋势  │ ⭐⭐⭐⭐ │ ⭐    │ ⭐      │ ⭐⭐      │ ⚠️   │
│ C 稳健  │ ⭐⭐   │ ⭐⭐⭐  │ ⭐⭐⭐⭐  │ ⭐⭐⭐⭐⭐  │ ✅   │
└─────────┴────────┴──────┴─────────┴──────────┴──────┘

关键洞察：
💡 策略 A：Sharpe 最高，但依赖极高频率和低延迟
💡 策略 B：收益最高，但波动大，Sharpe 最低
💡 策略 C：综合最优，风险收益平衡，可持续性强
```

---

## 🎯 交互式计算练习

### 练习 1：基础 Sharpe 计算

```
给定数据：
- 交易 1：收益率 = 3.0%
- 交易 2：收益率 = 2.5%
- 交易 3：收益率 = 4.0%
- 交易 4：收益率 = 1.5%
- 交易 5：收益率 = 3.5%
- 无风险利率（年化）= 3%
- 平均持仓时间 = 2天

计算步骤：

Step 1: 计算平均收益率
μ = (3.0 + 2.5 + 4.0 + 1.5 + 3.5) / 5 = ______%

Step 2: 计算标准差
偏差平方和：
(3.0 - μ)² + (2.5 - μ)² + (4.0 - μ)² + (1.5 - μ)² + (3.5 - μ)²

方差 = 偏差平方和 / (5 - 1) = ______
标准差 σ = √方差 = ______%

Step 3: 计算每笔无风险利率
rf_trade = (1 + 0.03)^(2/365) - 1 = ______%

Step 4: 计算 Sharpe Ratio
Sharpe = (μ - rf_trade) / σ = ______

答案：
Step 1: μ = 14.5 / 5 = 2.9%
Step 2: σ = 0.935% （约）
Step 3: rf_trade = 0.0164%
Step 4: Sharpe = (2.9 - 0.0164) / 0.935 = 3.08 🟢
```

---

### 练习 2：年化 Sharpe 计算

```
给定数据：
- 每笔交易 Sharpe = 1.5
- 交易笔数 = 50 笔
- 交易天数 = 180 天

计算步骤：

Step 1: 计算年交易频率
trades_per_year = (50 / 180) × 365 = ______ 笔/年

Step 2: 计算年化 Sharpe
annualized_sharpe = 1.5 × √trades_per_year
                  = 1.5 × √______
                  = 1.5 × ______
                  = ______

答案：
Step 1: 101.4 笔/年
Step 2: annualized_sharpe = 1.5 × √101.4
                          = 1.5 × 10.07
                          = 15.1 🏆
```

---

### 练习 3：策略对比

```
比较两个策略，选择更优的：

策略 X：
- 平均收益率：20%
- 标准差：18%
- 无风险利率：3%

策略 Y：
- 平均收益率：10%
- 标准差：5%
- 无风险利率：3%

计算：
Sharpe_X = (20% - 3%) / 18% = ______
Sharpe_Y = (10% - 3%) / 5% = ______

结论：
策略 ______ 更优，因为 Sharpe 更高（______ vs ______）

答案：
Sharpe_X = 17% / 18% = 0.944
Sharpe_Y = 7% / 5% = 1.40
结论：策略 Y 更优，因为 Sharpe 更高（1.40 vs 0.944）

虽然策略 X 收益更高（20% vs 10%），
但风险调整后，策略 Y 表现更优秀！✅
```

---

## 📈 Sharpe Ratio 优化路径可视化

```
当前状态：
┌────────────────────────────────────────────────────────┐
│ 平均收益率：  3.0%                                      │
│ 标准差：     2.5%                                      │
│ Sharpe Ratio：0.8                                     │
│ 评级：🟡 尚可                                          │
└────────────────────────────────────────────────────────┘
              ↓
      ┌───────┴───────┐
      ↓               ↓
 【提高收益】      【降低风险】
      │               │
      ├─ 优化入场      ├─ 严格止损
      ├─ 改进止盈      ├─ 仓位管理
      └─ 增加频率      └─ 分散化
              ↓
      【同时优化】
              ↓
┌────────────────────────────────────────────────────────┐
│ 平均收益率：  4.5%  ⬆ +50%                            │
│ 标准差：     1.8%  ⬇ -28%                             │
│ Sharpe Ratio：2.5  ⬆ +212%                           │
│ 评级：🟢 优秀                                          │
└────────────────────────────────────────────────────────┘

优化效果分解：
┌─────────────────┬───────┬───────┬──────────┐
│ 优化措施        │ 收益  │ 风险  │ Sharpe   │
├─────────────────┼───────┼───────┼──────────┤
│ 1. 优化入场时机 │ +1.0% │ -0.3% │ +0.52    │
│ 2. 改进止盈策略 │ +0.5% │ +0.1% │ +0.18    │
│ 3. 严格止损纪律 │ -0.0% │ -0.5% │ +0.40    │
│ 4. 仓位管理优化 │ +0.0% │ -0.3% │ +0.30    │
│ 5. 增加交易频率 │ +0.0% │ +0.0% │ +0.30*   │
├─────────────────┼───────┼───────┼──────────┤
│ 总计            │ +1.5% │ -1.0% │ +1.70    │
└─────────────────┴───────┴───────┴──────────┘

* 年化效应：√(新频率/旧频率)
```

---

## 🔍 风险收益图谱

```
不同策略在风险-收益平面的位置：

  收益率
    ↑
 20%│           ▲ E (高频套利)
    │          Sharpe = 5.0
 15%│
    │     ▲ D (本案例)
    │    Sharpe = 17.15
 10%│
    │   ▲ C (稳健策略)
    │  Sharpe = 2.5
  5%│ ▲ B (保守策略)
    │Sharpe = 1.5
  0%├─────────────────────────→ 风险（标准差）
    0%   5%   10%   15%   20%

策略定位：
┌──────────┬─────────┬──────────┬─────────────┐
│ 策略     │ 收益    │ 风险     │ 风险调整收益 │
├──────────┼─────────┼──────────┼─────────────┤
│ A 极保守 │ 3%      │ 2%       │ ⭐          │
│ B 保守   │ 5%      │ 3%       │ ⭐⭐        │
│ C 稳健   │ 10%     │ 4%       │ ⭐⭐⭐⭐    │
│ D 本案例 │ 15.82%  │ 8.89%    │ ⭐⭐⭐⭐⭐  │
│ E 激进   │ 20%     │ 18%      │ ⭐⭐        │
└──────────┴─────────┴──────────┴─────────────┘

等 Sharpe 曲线：
      收益
       ↑
       │     ╱ Sharpe = 3.0
       │    ╱
       │   ╱  Sharpe = 2.0
       │  ╱
       │ ╱   Sharpe = 1.0
       │╱
       └──────────────────→ 风险

曲线越陡峭，Sharpe 越高
同一条曲线上的点，Sharpe 相同
```

---

## 💡 常见误区可视化

### 误区 1：高收益 = 高 Sharpe

```
❌ 错误认知：
  "收益率30%的策略一定比收益率10%的策略好"

✅ 正确理解：
  需要同时考虑风险！

对比示例：
┌────────────────────────────────────────────────┐
│ 策略 A：收益30%，风险35%                        │
│ Sharpe = (30%-3%)/35% = 0.77  ⚠️             │
│                                                │
│   收益 ████████████████                        │
│   风险 █████████████████████                   │
│   Sharpe ███████                               │
├────────────────────────────────────────────────┤
│ 策略 B：收益10%，风险4%                         │
│ Sharpe = (10%-3%)/4% = 1.75  ✅              │
│                                                │
│   收益 ████                                    │
│   风险 ██                                      │
│   Sharpe ████████████████████                  │
└────────────────────────────────────────────────┘

结论：策略 B 虽然收益低，但 Sharpe 更高，
     风险调整后表现更优！
```

---

### 误区 2：杠杆会改变 Sharpe

```
❌ 错误认知：
  "使用10倍杠杆可以提高 Sharpe Ratio"

✅ 正确理解：
  杠杆同时放大收益和风险，Sharpe 不变！

示例验证：
┌────────────────────────────────────────────────┐
│ 无杠杆（1x）：                                  │
│ 持仓价值 = $10,000                             │
│ 盈利 = $500                                    │
│ 收益率 = $500 / $10,000 = 5%                   │
│                                                │
│ 假设标准差 = 2%                                │
│ Sharpe = (5%-3%)/2% = 1.0                     │
├────────────────────────────────────────────────┤
│ 10倍杠杆（10x）：                               │
│ 持仓价值 = $100,000（但本金仍为$10,000）        │
│ 盈利 = $5,000（10倍）                          │
│ 收益率 = $5,000 / $100,000 = 5%  ← 相同！      │
│                                                │
│ 标准差 = 2%（相对持仓价值）  ← 相同！           │
│ Sharpe = (5%-3%)/2% = 1.0  ← 不变！           │
└────────────────────────────────────────────────┘

关键：使用持仓价值计算，Sharpe 与杠杆无关！
```

---

### 误区 3：Sharpe 越高越好（无条件）

```
❌ 错误认知：
  "只要 Sharpe 高就应该选择"

✅ 正确理解：
  需要考虑绝对收益和策略容量！

对比：
┌────────────────────────────────────────────────┐
│ 策略 Alpha（套利）：                            │
│ 年化收益：5%                                    │
│ 年化 Sharpe：5.0  🏆                           │
│ 策略容量：$100K（小）                           │
│                                                │
│ 适合：小资金，追求稳定                          │
│ 不适合：大资金，追求高收益                      │
├────────────────────────────────────────────────┤
│ 策略 Beta（趋势）：                             │
│ 年化收益：50%                                   │
│ 年化 Sharpe：1.2  ⚠️                          │
│ 策略容量：$10M（大）                            │
│                                                │
│ 适合：大资金，能承受波动                        │
│ 不适合：小资金，低风险偏好                      │
└────────────────────────────────────────────────┘

选择建议：
1. 小资金（<$100K） → 选 Alpha（高 Sharpe）
2. 大资金（>$1M）   → 选 Beta（高收益）
3. 中等资金         → 组合配置
```

---

## 📊 实战应用场景

### 场景 1：策略验证

```
问题：如何判断新策略是否值得实盘？

回测数据：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
样本量：200 笔交易
时间跨度：365 天
平均收益率：8.5%
标准差：6.2%
胜率：65%
最大回撤：18%
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

评估步骤：
┌──────────────────────────────────────────────┐
│ 1. 计算 Sharpe Ratio                         │
│    Sharpe = (8.5% - 3%) / 6.2% = 0.887      │
│                                              │
│ 2. 年化 Sharpe                               │
│    年化 = 0.887 × √(200/365×365) = 13.3     │
│                                              │
│ 3. 综合评估                                  │
│    ✅ Sharpe > 1：合格                       │
│    ✅ 年化 Sharpe > 3：优秀                  │
│    ✅ 样本量充足（200笔）                     │
│    ✅ 最大回撤可接受（18%）                   │
│                                              │
│ 4. 决策                                      │
│    🟢 建议实盘，但建议：                     │
│       - 小仓位试运行（10-20%）                │
│       - 持续监控 Sharpe 变化                 │
│       - 设置止损保护（-25%）                  │
└──────────────────────────────────────────────┘
```

---

### 场景 2：策略退化监控

```
监控仪表盘：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
时间段         Sharpe   趋势   状态
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
全部历史      2.5      ━━━   🟢 优秀
最近180天     2.2      ▼     🟢 良好
最近90天      1.8      ▼▼    🟡 下降
最近30天      1.2      ▼▼▼   ⚠️ 警告
最近7天       0.6      ▼▼▼▼  🔴 异常
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

趋势图：
  Sharpe
   3.0 ┤
   2.5 ┤━━━━━━━━━━━━━
   2.0 ┤              ╲
   1.5 ┤               ╲_
   1.0 ┤                  ╲_
   0.5 ┤                    ╲_
   0.0 └─────────────────────→ 时间
       180天 90天 30天 7天

诊断分析：
┌──────────────────────────────────────────────┐
│ ⚠️ Sharpe 持续下降，可能原因：                │
│                                              │
│ 1. 市场环境变化                              │
│    - 波动率增加                              │
│    - 趋势性减弱                              │
│                                              │
│ 2. 策略失效                                  │
│    - 竞争加剧                                │
│    - 套利机会减少                            │
│                                              │
│ 3. 执行问题                                  │
│    - 滑点增加                                │
│    - 延迟上升                                │
│                                              │
│ 建议措施：                                   │
│ 🔴 立即降低仓位至50%                         │
│ 🔴 暂停新开仓，观察1-2周                     │
│ 🟡 分析最近亏损交易特征                      │
│ 🟡 考虑参数优化或策略升级                    │
└──────────────────────────────────────────────┘
```

---

## 🎓 进阶主题

### Sharpe Ratio 的局限性

```
1. 假设正态分布
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  理论分布          实际分布（肥尾）
      /\                 /\
     /  \               /  \___
    /    \             /       \___
───/──────\───    ───/────────────\───
 -3σ  μ  +3σ       -3σ  μ     极端值

问题：Sharpe 假设正态分布，
     但实际市场存在极端事件（黑天鹅）

改进：结合 VaR、CVaR 等尾部风险指标

2. 上下波动同等对待
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  场景 A（小赚大亏）   场景 B（小亏大赚）
  +2%, +1%, -15%      -2%, -1%, +15%

  Sharpe 认为两者风险相同（标准差相同）
  但投资者更担心场景 A！

改进：使用 Sortino Ratio（只惩罚下行波动）

3. 时间相关性
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  假设：各期收益独立
  现实：趋势延续、波动聚集

  解决：考虑自相关性调整年化因子
```

---

## 📱 快速参考卡片

```
┌─────────────────────────────────────────────┐
│ Sharpe Ratio 快速公式                        │
├─────────────────────────────────────────────┤
│ 每笔 Sharpe = (μ - rf) / σ                  │
│ 年化 Sharpe = 每笔 × √年交易频率             │
├─────────────────────────────────────────────┤
│ 评级标准：                                   │
│ > 3.0  🏆 卓越                              │
│ 2-3    🟢 优秀                              │
│ 1-2    🟡 良好                              │
│ 0.5-1  ⚠️ 尚可                              │
│ < 0.5  🔴 差                                │
└─────────────────────────────────────────────┘
```

---

## 📚 相关文档

- **详细算法**：`夏普比率算法详解.md`
- **快速参考**：`夏普比率_快速参考.md`
- **代码实现**：`apex_fork.py:715-800`

---

*可视化文档版本：v1.0*
*创建时间：2026-02-04*
